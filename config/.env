# =============================================================================
# 메인 설정 (.env) - 수정된 완전판
# =============================================================================

# 환경 설정
NODE_ENV=development
LOG_LEVEL=debug
ENV_STAGE=dev
BACKEND_PORT=3000
BUILD_TYPE=dev
AUTO_BUILD=true
AUTO_RUN=true

# 🔥 데이터베이스 자동 초기화 (핵심!)
AUTO_INITIALIZE_ON_START=true
SKIP_IF_INITIALIZED=true
FAIL_ON_INIT_ERROR=false

# 🔥 기본 디렉토리 및 DB 설정 (추가됨)
DATA_DIR=./data
LOGS_DIR=./logs
PORT=3000
DATABASE_TYPE=SQLITE
SQLITE_PATH=./data/db/pulseone.db
SQLITE_DB_PATH=./data/db/pulseone.db

# 🔥 로그 설정 (추가됨)
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_FILE_PATH=./logs/
LOG_MAX_SIZE_MB=100
LOG_MAX_FILES=30

# 🔥 기본 Redis 설정 (추가됨)
REDIS_PRIMARY_ENABLED=true
REDIS_PRIMARY_HOST=localhost
REDIS_PRIMARY_PORT=6379
REDIS_PRIMARY_DB=0

# =============================================================================
# 🔥 모듈별 설정 파일들 (중요! - 원래대로 복원)
# =============================================================================
CONFIG_FILES=database.env,redis.env,timeseries.env,messaging.env,alarm.env

# 설정 파일 디렉토리
CONFIG_DIR=./config
SECRETS_DIR=./config/secrets

# =============================================================================
# Docker 서비스 기본값 (기존 유지)
# =============================================================================
POSTGRES_DB=pulseone
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123

INFLUX_USERNAME=admin
INFLUX_PASSWORD=influxpassword
INFLUX_ORG=pulseone
INFLUX_BUCKET=timeseries
INFLUX_TOKEN=my-super-secret-auth-token

RABBITMQ_USER=rabbitmq
RABBITMQ_PASSWORD=rabbitmq123

# =============================================================================
# HTTP 통신 안정성 (기존 유지)
# =============================================================================
COLLECTOR_POOL_SIZE=20
COLLECTOR_KEEP_ALIVE=true
COLLECTOR_HEALTH_INTERVAL=30000

# Circuit Breaker 설정
COLLECTOR_CB_THRESHOLD=5
COLLECTOR_CB_TIMEOUT=30000

# 장애 복구
FAULT_RECOVERY_ENABLED=true
FAULT_RECOVERY_MAX_ATTEMPTS=5
FAULT_RECOVERY_COOLDOWN=60000

# =============================================================================
# 추가 시스템 설정
# =============================================================================
MAX_WORKER_THREADS=4
DEFAULT_TIMEOUT_MS=5000
MAINTENANCE_MODE=false
DEBUG=pulseone:*
CHOKIDAR_USEPOLLING=true