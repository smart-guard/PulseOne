# collector/Dockerfile.dev - C++ 기반으로 수정
FROM gcc:latest

# C++ 개발에 필요한 패키지 + Claude Code 설치
RUN apt-get update && apt-get install -y \
    cmake \
    make \
    libpqxx-dev \
    libpq-dev \
    libsqlite3-dev \
    curl \
    git \
    nodejs \
    npm \
    && rm -rf /var/lib/apt/lists/*

# Claude Code 설치 (개발용)
RUN npm install -g @anthropic-ai/claude-code

WORKDIR /app/collector

# Collector 소스만 복사
COPY collector/ /app/collector/
COPY config/ /app/config/

# 개발 모드에서는 bash 실행
CMD ["/bin/bash"]